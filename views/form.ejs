<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/static/favicon.ico">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.4.0/mdb.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.rtl.min.css"
        integrity="sha384-+4j30LffJ4tgIMrq9CwHvn0NjEvmuDCOfk6Rpg2xg7zgOxWWtLtozDEEVvBPgHqE" crossorigin="anonymous">
    <style>
        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>

    <title>Alumani form</title>
</head>

<body>
    <!-- nav -->
    <%- include('common/header.ejs'); %>

        <div class="bg-light pb-5" style="padding-top: 120px;min-height: 100vh;">

            <div class="container bg-white py-3 px-5 d-flex flex-column justify-content-center"
                style="max-width: 650px;">
                <div class="container-fluid p-3 text-center">
                    <h3 class="mb-3">Alumni Registration Form</h3>
                </div>
                <div class="container text-center" id="submitted">
                    <span class="material-symbols-outlined" style="font-size: 70px;">
                        check_circle
                    </span>
                    <h5>Thank You!</h5>
                    <p>The form was submitted successfully.</p>
                    <p>
                        <a class="btn btn-link" onclick="anotherResponse()" style="cursor: pointer;">Submit another
                            response</a>
                    </p>
                </div>
                <form class="" id="alumani-form">
                    <div class="row">
                        <div class="col">
                            <!-- Name input -->
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" name="name" required="" />
                                <label class="form-label">Name *</label>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col">
                            <!-- Enrollement No -->
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" name="enr_no" required="" />
                                <label class="form-label">Enrollment no</label>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="number" minlength="4" maxlength="4" id="form8Example3"
                                    class="form-control my-3" required="" name="adm_year" />
                                <label class="form-label" for="form8Example3">Admission year *</label>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-outline">
                                <input type="number" minlength="4" maxlength="4" id="form8Example4"
                                    class="form-control my-3" required="" name="pout_year" />
                                <label class="form-label" for="form8Example4">Passout year *</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col my-3">
                            <div class="formoutline">
                                <select class="form-select" aria-label="Default select example"
                                    style="color: rgb(119, 119, 124);" required="" name="college">
                                    <option value="">College Name *</option>
                                    <option value="SDBCE">SDBCE</option>
                                    <option value="SDBCT">SDBCT</option>
                                    <option value="SDBCT">KCB</option>
                                </select>
                            </div>
                        </div>
                        <div class="col my-3">
                            <div class="formoutline">
                                <select class="form-select" aria-label="Default select example"
                                    style="color: rgb(119, 119, 124);" required="" name="course" id="course">
                                    <option value="">Course *</option>
                                    <option value="Btech">B-Tech</option>
                                    <option value="Mtech">M-tech</option>
                                    <option value="MBA">MBA</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="row">
                        <div class="col my-3">
                            <div class="formoutline">
                                <select class="form-select" aria-label="Default select example"
                                    style="color: rgb(119, 119, 124);" name="branch" id="branch">
                                    <option value="">Branch</option>
                                    <option value="CSE">CSE</option>
                                    <option value="IT">IT</option>
                                    <option value="EC">EC</option>
                                    <option value="CE">CE</option>
                                    <option value="ME">ME</option>
                                </select>
                            </div>
                        </div>
                        <div class="col my-3">
                            <div class="formoutline">
                                <select class="form-select" aria-label="Default select example"
                                    style="color: rgb(119, 119, 124);" name="specialization" id="specialization">
                                    <option value="">Specialization</option>
                                    <option value="CSE">Computer Science & Engg (CSE)</option>
                                    <option value="EC">Digital Communication (EC)</option>
                                    <option value="ME">Thermal (ME)</option>
                                    <option value="CE">Structural Engg (CE)</option>
                                </select>
                            </div>
                        </div>
                    </div> -->
                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="number" placeholder="+91XXXXX-XXXXX" minlength="10" maxlength="10"
                                    class="form-control my-3" required="" name="mobileno" />
                                <label class="form-label">Mobile no *</label>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-outline">
                                <input type="email" class="form-control my-3" required="" name="email" />
                                <label class="form-label">Email *</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" name="facebookid" />
                                <label class="form-label">Facebook ID</label>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" name="linkedinid" />
                                <label class="form-label">Linkedin ID</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" required="" name="collegename">
                                <label class="form-label">Current Company Name *</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" required="" name="designation">
                                <label class="form-label">Designation *</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" required="" name="workinglocation">
                                <label class="form-label">Working Location *</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" required="" name="permanentaddress">
                                <label class="form-label">Permanent Address *</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-outline">
                                <input type="text" class="form-control my-3" required="" name="localaddress">
                                <label class="form-label">Local Address *</label>
                            </div>
                        </div>
                    </div>

                    <div class="row m-4">
                        <button type="submit" id="submitbtn" class="btn btn-primary col" style="width: 200px;">Submit</button>
                    </div>
                </form>
            </div>
        </div>
        <div id="alert" class="alert alert-danger" role="alert"
            style="position: fixed;bottom: 20px;right: 30px;display: none;">
            Server error, try again after some time
        </div>
        <!-- footer -->
        <%- include('common/footer.ejs'); %>

</body>
<script>
    // localStorage.setItem('state', 'submitted')
    let state = localStorage.getItem('state');
    let submitted = document.getElementById('submitted');
    submitted.style.display = 'none';
    // console.log(state);
    var alert = document.getElementById('alert');
    var form = document.querySelector('#alumani-form');
    if (state == 'submitted') {
        form.style.display = "none";
        submitted.style.display = '';

    }
    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        let submitbtn = document.getElementById('submitbtn');
        submitbtn.setAttribute('disabled',true);
        var data = {
            name: form.name.value,
            enrollementno: form.enr_no.value,
            admissionyear: form.adm_year.value,
            passoutyear: form.pout_year.value,
            college: form.college.value,
            course: form.course.value,
            // branch: form.branch.value,
            // specilization: form.specialization.value,
            mobileno: form.mobileno.value,
            email: form.email.value,
            facebookid: form.facebookid.value,
            linkedinid: form.linkedinid.value,
            collegename: form.collegename.value,
            designation: form.designation.value,
            workinglocation: form.workinglocation.value,
            permanentaddress: form.permanentaddress.value,
            localaddress: form.localaddress.value
        }
        let res = await fetch('/alumni', {
            method: 'POST',
            body: JSON.stringify(data),
            headers: { 'Content-Type': 'application/json' }
        });
        if (res.status == 200) {
            localStorage.setItem('state', 'submitted');
            form.style.display = "none";
            submitted.style.display = '';
            form.reset();
        }
        else {
            alert.style.display = '';
            setTimeout(() => {
                alert.style.display = 'none';

            }, 2000)
        }
        // console.log(res);
    });

    /*
    var course = document.getElementById('course');
    var specialization = document.getElementById('specialization');
    var branch = document.getElementById('branch');

    branch.setAttribute('disabled', true);
    specialization.setAttribute('disabled', true);
    branch.value = '';
    specialization.value = '';
    course.addEventListener('change', () => {
        if (course.value == 'Btech') {
            console.log('Btech');
            branch.removeAttribute('disabled');
            specialization.setAttribute('disabled', true);
            specialization.value = '';

        }
        else if (course.value == 'Mtech') {
            console.log('Mtech');
            branch.setAttribute('disabled', true);
            specialization.removeAttribute('disabled');
            branch.value = '';

        }
        else {
            branch.setAttribute('disabled', true);
            specialization.setAttribute('disabled', true);
            branch.value = '';
            specialization.value = '';
            console.log('MBA');
        }
    })
    */

    function anotherResponse() {
        localStorage.removeItem('state');
        form.style.display = "";
        submitted.style.display = 'none';
        document.getElementById('submitbtn').removeAttribute('disabled');
    }

</script>

<!-- MDB -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.4.0/mdb.min.js"></script>

</html>